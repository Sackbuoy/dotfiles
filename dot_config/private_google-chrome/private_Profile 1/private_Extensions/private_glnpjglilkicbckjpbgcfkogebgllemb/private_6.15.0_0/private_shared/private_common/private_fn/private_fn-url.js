!function FnUrlIIFE(){var r=Okta.parseUri,t=Okta._okta,e=t.any,o=t.compose,a=t.contains,n=t.partial,i=t.each,s=t.find,c=t.flatten,u=t.reduce,l=t.isMatch,m=Okta.fn.other.string.endsWith,h=t.pick,p=Okta.fn.url={},f=["okta.mil","okta-miltest.com","okta-gov.com","trex-govcloud.com"],k=c(["cloudareanet.com","clouditude.com","hioktane.com","lowoktane.com","openalloy.com","okta.com","okta1.com","okta-emea.com","oktapreview.com","perfcloud.org","primeapp.com","trexcloud.com","widerock.com","okta.ninja",f]),g="-admin",P=["/app/UserHome","/app/Home","/enduser"],d=["/app/UserHome","/plugin/bookmark","/home/plugin","/enduser/app-settings"],O=[{path:"/oauth2/v1/authorize",queryKey:{client_id:Okta.Constants.AuthOptions.PLUGIN_CLIENT_ID}},{path:"/discovery/iframe.html"},{path:"/login/token/redirect"}],v=["www.okta.com","trust.okta.com","system.okta.com","static.okta.com","support.okta.com","developer.okta.com","login.okta.com","help.okta.com","trustro.okta.com","investor.okta.com","oanmanager.okta.com","oinmanager.okta.com","devforum.okta.com","store.okta.com","status.okta.com","survey.okta.com","infra.okta.com","workflow.okta.com","productfeedback.okta.com","productfeedbacksandbox.okta.com","regionalevents.okta.com","workflows.okta.com","ideas.okta.com","rewards.okta.com","pages.okta.com","sec.okta.com","personal.okta.com","profile.okta.com","partner.okta.com","id.okta.com"],U=["/app/*/*/sso/saml*","/app/office365/*/*"],H=["/sso/wsfed/signout"];function T(r){var a=[];return i(k,function(t){var o=t+r;a.push("https://*."+o),Okta.Config.allowOktaHttp&&a.push("http://*."+o)}),a}function w(t,o){var r=o.split(".");if(r.length<2)return!1;var a=r[r.length-2]+"."+r[r.length-1];return e(t,function(t){return t===a})}p.isHomepageIframePath=function(o){return!!s(O,function(t){return p.isUrlPathStartsWith(o,t.path)&&(!t.queryKey||l(o.queryKey,t.queryKey))})},p.isUrlPathStartsWith=function(t,o){return t.path===o||0===t.path.indexOf(o+"/")},p.hrefToUrlParts=function(t){var o=r(t);return o.href=t,h(o,"anchor","path","port","host","protocol","href","queryKey")},p.locationToUrlParts=function(t){return{anchor:t.hash.replace("#",""),path:t.pathname,port:t.port,host:t.hostname,protocol:t.protocol.replace(":",""),href:t.href,queryKey:r(t.search).queryKey}},p.urlPartsToHref=function(t){return t.href},p.urlPartsToDomain=function(t){var o=t.protocol+"://"+t.host;return""!==t.port&&(o+=":"+t.port),o},p.urlPartsToDomainWithoutPort=function(t){return t.protocol+"://"+t.host},p.urlPartsToDomainAndPath=function(t){return p.urlPartsToDomain(t)+t.path},p.replaceUrlPartsPath=function(t,o){return p.hrefToUrlParts(p.urlPartsToDomain(t)+o)},p.removeTrailingSlash=function(t){if(t){var o=t.replace(/^\s+|\s+$/gm,"");return o=o.replace(/\/+$/,"")}},p.getOktaDomains=function(){return k},p.isOktaPage=function(t,o){return!(!Okta.Config.allowOktaHttp&&"https"!==t.protocol)&&(!(o&&!p.isUrlPathStartsWith(t,o))&&(!(!Okta.Config.allowLocalHostOrServer||"localhost"!==t.host)||w(k,t.host)))},p.isOktaLoginAccounts=function(t){return p.isOktaPage(t)&&"login.okta.com"===t.host},p.isOktaHref=o(p.isOktaPage,p.hrefToUrlParts),p.isOktaAdminPage=function(t){var o=t.host.split(".");return p.isOktaPage(t)&&m(o[0],g)},p.isOktaEndUserHomePage=function(t){return p.isOktaHref(t.href)&&!p.isOktaAdminPage(t)&&p.isOktaEndUserHomePagePath(t)},p.isOktaEndUserHomePagePath=function(t){return!!s(P,n(p.isUrlPathStartsWith,t))},p.isOktaPluginHomePagePath=function(t){return!!s(d,n(p.isUrlPathStartsWith,t))},p.isOktaPluginHomePage=function(o){return!!s(d,function(t){return p.isOktaPage(o,t)})},p.isOktaEndUserHomeHref=o(p.isOktaEndUserHomePage,p.hrefToUrlParts),p.isCustomEndUserHomeHref=function(t,o){if(!t||!o)return!1;var r=p.hrefToUrlParts(t),a=p.hrefToUrlParts(o);return p.isOktaEndUserHomePagePath(r)&&r.protocol===a.protocol&&r.host===a.host&&r.port===a.port},p.normalizeOktaSubdomain=function(t){if(p.isOktaAdminPage(t)){var o=t.host.split(".");o[0]=o[0].substr(0,o[0].length-g.length),t.host=o.join(".")}return t},p.isOktaTrustedFQDN=function(t){return a(v,t.host)},p.matchesHref=function(t){var o=new Okta.Url(p.urlPartsToHref(t));return function(t){return o.matches(t)}},p.matchesDomains=function(t,o){return p.urlPartsToDomain(t)===p.urlPartsToDomain(o)},p.getOktaFederatedRequestMatchPatterns=function(){return u(U,function(t,o){return t.concat(T(o))},[])},p.isAllowedOktaRequestForAuthMonitoring=function(o){return!!o&&(!!p.isOktaPage(p.hrefToUrlParts(o))&&!s(H,function(t){return-1<o.indexOf(t)}))},p.getMonitoredSitesApiMatchPatterns=function(){return T("/api/plugin/2/sites*")},p.getAppInfoFromSiteUrl=function(t){var o=p.hrefToUrlParts(t).path.split("/");return"app"===o[1]&&o[2]&&o[3]?{appName:o[2],instanceId:o[3]}:null},p.getOktaDomainsRegexp=function(t){if(!t.length)return null;var o="^";return o+=Okta.Config.allowOktaHttp?"http[s]?":"https",o+="://[^/]+\\.(",i(t,function(t){o+=t.replace(".","\\.")+"|"}),o=o.slice(0,-1),o+=")(",i(P,function(t){o+=t+"|"}),o=o.slice(0,-1),o+=")"},p.getSubDomain=function(t){var o=t.lastIndexOf(".");if(o<=0)return null;--o;var r=t.lastIndexOf(".",o);return-1==r||r==o?null:t.substring(r+1)},p.isOktaPersonalAccount=function(t){var o=["https://personal.okta.com","https://personal.trexcloud.com"];return Okta.Config.allowLocalHostOrServer&&(o.push("http://localhost"),o.push("https://rain.okta1.com")),a(o,t)},p.isOktaFederalDomain=function(t){var o=p.hrefToUrlParts(t);return"https"===o.protocol&&w(f,o.host)}}();